<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL conditional functions and expressions | Elasticsearch Guide [8.11] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL conditional functions and expressions | Elasticsearch Guide [8.11]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.11]"/>
<link rel="up" href="esql-functions-operators.html" title="ES|QL functions and operators"/>
<link rel="prev" href="esql-type-conversion-functions.html" title="ES|QL type conversion functions"/>
<link rel="next" href="esql-mv-functions.html" title="ES|QL multivalue functions"/>
<meta class="elastic" name="product_version" content="8.11"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.11"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.11"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.11]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql-functions-operators.html">ES|QL functions and operators</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="esql-type-conversion-functions.html">« ES|QL type conversion functions</a>
</span>
<span class="next">
<a href="esql-mv-functions.html">ES|QL multivalue functions »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="esql-conditional-functions-and-expressions"></a>ES|QL conditional functions and expressions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/esql/functions/conditional-functions-and-expressions.asciidoc">edit</a></h2>
</div></div></div>

<p>Conditional functions return one of their arguments by evaluating in an if-else
manner. ES|QL supports these conditional functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-conditional-functions-and-expressions.html#esql-case" title="CASE"><code class="literal">CASE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-conditional-functions-and-expressions.html#esql-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-conditional-functions-and-expressions.html#esql-greatest" title="GREATEST"><code class="literal">GREATEST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-conditional-functions-and-expressions.html#esql-least" title="LEAST"><code class="literal">LEAST</code></a>
</li>
</ul>
</div>
<h3><a id="esql-case"></a><code class="literal">CASE</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/esql/functions/case.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">CASE(condition1, value1[, ..., conditionN, valueN][, default_value])</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">conditionX</code>
</span>
</dt>
<dd>
A condition.
</dd>
<dt>
<span class="term">
<code class="literal">valueX</code>
</span>
</dt>
<dd>
The value that&#8217;s returned when the corresponding condition is the first to
evaluate to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">default_value</code>
</span>
</dt>
<dd>
The default value that&#8217;s is returned when no condition matches.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Accepts pairs of conditions and values. The function returns the value that
belongs to the first condition that evaluates to <code class="literal">true</code>.</p>
<p>If the number of arguments is odd, the last argument is the default value which
is returned when no condition matches.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| EVAL type = case(
    languages &lt;= 1, "monolingual",
    languages &lt;= 2, "bilingual",
     "polyglot")
| KEEP emp_no, languages, type</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">emp_no:integer</th>
<th align="left" valign="top">languages:integer</th>
<th align="left" valign="top">type:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10001</p></td>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>bilingual</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10002</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>polyglot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10003</p></td>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>polyglot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10004</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>polyglot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10005</p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>monolingual</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-coalesce"></a><code class="literal">COALESCE</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/esql/functions/coalesce.asciidoc">edit</a></h3>
<p>Returns the first non-null value.</p>
<div class="pre_wrapper lang-esql merge styled">
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=null, b="b"
| EVAL COALESCE(a, b)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:null</th>
<th align="left" valign="top">b:keyword</th>
<th align="left" valign="top">COALESCE(a,b):keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>null</p></td>
<td align="left" valign="top"><p>b</p></td>
<td align="left" valign="top"><p>b</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-greatest"></a><code class="literal">GREATEST</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/esql/functions/greatest.asciidoc">edit</a></h3>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="420" height="46" viewbox="0 0 420 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m80 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">GREATEST</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="80" height="36" rx="7"/><text class="k" x="183" y="31">first</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="68" height="36" rx="7"/><text class="k" x="315" y="31">rest</text><rect class="s" x="383" y="5" width="32" height="36" rx="7"/><text class="syn" x="393" y="31">)</text></svg>
</div>
</div>
<p>Returns the maximum value from many columns. This is similar to <a class="xref" href="esql-mv-functions.html#esql-mv_max" title="MV_MAX"><code class="literal">MV_MAX</code></a>
except it&#8217;s intended to run on multiple columns at once.</p>
<div class="pre_wrapper lang-esql merge styled">
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = 10, b = 20
| EVAL g = GREATEST(a, b)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">b:integer</th>
<th align="left" valign="top">g:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>20</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When run on <code class="literal">keyword</code> or <code class="literal">text</code> fields, this&#8217;ll return the last string
      in alphabetical order. When run on <code class="literal">boolean</code> columns this will return
      <code class="literal">true</code> if any values are <code class="literal">true</code>.</p>
</div>
</div>
<p>Supported types:</p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first</th>
<th align="left" valign="top">rest</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-least"></a><code class="literal">LEAST</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/esql/functions/least.asciidoc">edit</a></h3>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="384" height="46" viewbox="0 0 384 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m80 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">LEAST</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="80" height="36" rx="7"/><text class="k" x="147" y="31">first</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">,</text><rect class="s" x="269" y="5" width="68" height="36" rx="7"/><text class="k" x="279" y="31">rest</text><rect class="s" x="347" y="5" width="32" height="36" rx="7"/><text class="syn" x="357" y="31">)</text></svg>
</div>
</div>
<p>Returns the minimum value from many columns. This is similar to <a class="xref" href="esql-mv-functions.html#esql-mv_min" title="MV_MIN"><code class="literal">MV_MIN</code></a>
except it&#8217;s intended to run on multiple columns at once.</p>
<div class="pre_wrapper lang-esql merge styled">
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = 10, b = 20
| EVAL l = LEAST(a, b)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">b:integer</th>
<th align="left" valign="top">l:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>10</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When run on <code class="literal">keyword</code> or <code class="literal">text</code> fields, this&#8217;ll return the first string
      in alphabetical order. When run on <code class="literal">boolean</code> columns this will return
      <code class="literal">false</code> if any values are <code class="literal">false</code>.</p>
</div>
</div>
<p>Supported types:</p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first</th>
<th align="left" valign="top">rest</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="esql-type-conversion-functions.html">« ES|QL type conversion functions</a>
</span>
<span class="next">
<a href="esql-mv-functions.html">ES|QL multivalue functions »</a>
</span>
</div>
</div>
</body>
</html>
