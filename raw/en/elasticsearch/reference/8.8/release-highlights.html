<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>What&#8217;s new in 8.8 | Elasticsearch Guide [8.8] | Elastic</title>
<meta class="elastic" name="content" content="What&#8217;s new in 8.8 | Elasticsearch Guide [8.8]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.8]"/>
<link rel="up" href="index.html" title="Elasticsearch Guide [8.8]"/>
<link rel="prev" href="scalability.html" title="Scalability and resilience: clusters, nodes, and shards"/>
<link rel="next" href="setup.html" title="Set up Elasticsearch"/>
<meta class="elastic" name="product_version" content="8.8"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.8"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.8"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.8]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="scalability.html">« Scalability and resilience: clusters, nodes, and shards</a>
</span>
<span class="next">
<a href="setup.html">Set up Elasticsearch »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="release-highlights"></a>What&#8217;s new in 8.8<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.8/docs/reference/release-notes/highlights.asciidoc">edit</a></h1>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Coming in 8.8.</p>
</div>
</div>
<p>Here are the highlights of what&#8217;s new and improved in Elasticsearch 8.8!</p>
<h3><a id="encode_using_40_48_56_bits_per_value"></a>Encode using 40, 48 and 56 bits per value<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.8/docs/reference/release-notes/highlights.asciidoc">edit</a></h3>
<p>We use the encoding as follows:
* for values taking [33, 40] bits per value, encode using 40 bits per value
* for values taking [41, 48] bits per value, encode using 48 bits per value
* for values taking [49, 56] bits per value, encode using 56 bits per value</p>
<p>This is an improvement over the encoding used by ForUtils which does not
apply any compression for values taking more than 32 bits per value.</p>
<p>Note that 40, 48 and 56 bits per value represent exact multiples of
bytes (5, 6 and 7 bytes per value). As a result, we always write values
using 3, 2 or 1 byte less than the 8 bytes required for a long value.</p>
<p>Looking at the savings in stored bytes, for a block of 128 (long) values we
would normally store 128 x 8 bytes = 1024 bytes, while now we have the following:
* 40 bits per value: write 645 bytes instead of 1024, saving 379 bytes (37%)
* 48 bits per value: write 772 bytes instead of 1024, saving 252 bytes (24%)
* 56 bits per value: write 897 bytes instead of 1024, saving 127 bytes (12%)</p>
<p>We also apply compression to gauge metrics under the assumption that
compressing values taking more than 32 bits per value works well for
floating point values, because of the way floating point values are
represented (IEEE 754 format).</p>
<p><a href="https://github.com/elastic/elasticsearch/pull/93371" class="ulink" target="_top">#93371</a></p>
<h3><a id="add_support_for_reciprocal_rank_fusion_rrf_to_search_api"></a>Add support for Reciprocal Rank Fusion (RRF) to the search API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.8/docs/reference/release-notes/highlights.asciidoc">edit</a></h3>
<p>This change adds reciprocal rank fusion (RRF) which follows the basic formula
for merging <code class="literal">1...n</code> sets of results sets together with <code class="literal">sum(1/(k+d))</code> where <code class="literal">k</code>
is a ranking constant and <code class="literal">d</code> is a document&#8217;s scored position within a result set
from a query. The main advantage of ranking this way is the scores for the sets
of results do not have to be normalized relative to each other because RRF only
relies upon positions within each result set.</p>
<p>The API for this change adds a <code class="literal">rank</code> top-level element to the search
endpoint. An example:</p>
<div class="pre_wrapper lang-Java">
<pre class="programlisting prettyprint lang-Java">{
  "query": {
    "match": {
      "product": {
        "query": "brown shoes"
      }
    }
  },
  "knn": {
    "field": "product-vector",
    "query_vector": [54, 10, -2],
    "k": 20,
    "num_candidates": 75
  },
  "rank": {
     "rrf": {
        "window_size": 100,
        "rank_constant": 20
     }
  }
}</pre>
</div>
<p>The above example will execute the search query and the knn search separately.
It will preserve separate result sets up to the point where the queries are
ranked on the coordinating node using RRF.</p>
<p><a href="https://github.com/elastic/elasticsearch/pull/93396" class="ulink" target="_top">#93396</a></p>
<h3><a id="add_new_similarity_field_to_knn_clause_in_search"></a>Add new <code class="literal">similarity</code> field to <code class="literal">knn</code> clause in <code class="literal">_search</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.8/docs/reference/release-notes/highlights.asciidoc">edit</a></h3>
<p>This adds a new parameter to <code class="literal">knn</code> that allows filtering nearest
neighbor results that are outside a given similarity.</p>
<p><code class="literal">num_candidates</code> and <code class="literal">k</code> are still required as this controls the
nearest-neighbor vector search accuracy and exploration. For each shard
the query will search <code class="literal">num_candidates</code> and only keep those that are
within the provided <code class="literal">similarity</code> boundary, and then finally reduce to
only the global top <code class="literal">k</code> as normal.</p>
<p>For example, when using the <code class="literal">l2_norm</code> indexed similarity value, this
could be considered a <code class="literal">radius</code> post-filter on <code class="literal">knn</code>.</p>
<p>relates to: <a href="https://github.com/elastic/elasticsearch/issues/84929" class="ulink" target="_top">https://github.com/elastic/elasticsearch/issues/84929</a> &amp;&amp;
<a href="https://github.com/elastic/elasticsearch/pull/93574" class="ulink" target="_top">https://github.com/elastic/elasticsearch/pull/93574</a></p>
<p><a href="https://github.com/elastic/elasticsearch/pull/94828" class="ulink" target="_top">#94828</a></p>
<h3><a id="ga_release_of_jwt_realm"></a>GA release of the JWT realm<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.8/docs/reference/release-notes/highlights.asciidoc">edit</a></h3>
<p>This PR removes the beta label for JWT realm feature to make it GA.</p>
<p><a href="https://github.com/elastic/elasticsearch/pull/95398" class="ulink" target="_top">#95398</a></p>
</div>
<div class="navfooter">
<span class="prev">
<a href="scalability.html">« Scalability and resilience: clusters, nodes, and shards</a>
</span>
<span class="next">
<a href="setup.html">Set up Elasticsearch »</a>
</span>
</div>
</div>
</body>
</html>
